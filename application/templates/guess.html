{% extends "base.html" %}

{% block content %}  
	<div class="row">
        <div class="col-sm-6" style="position:relative">            
            <img class="photo" src="https://quakestudies.canterbury.ac.nz/store/download/part/{{PhotoNo}}"> 
        </div>
        <div id="mySidenav" class="sidenav col-sm-6">
			<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <<div id="map" style="width: 100%; height: 80vh;"></div>  
            <form class="guess" name="form" action = "/check" method = 'POST' 
         enctype = "multipart/form-data">
			<input type="hidden" id="lat" name="lat itude"/>
			<input type="hidden" id="long" name="longitude"/>          
			<button disabled=disabled id="guess" style="width:200px;height:50px;font-size:15px" class="btn btn-success" type="submit" name="photo" value="{{PhotoNo}}">Make Guess</button>
			</form>
		</div>
		<div>
			<button class="btn" onclick="openNav()">Make Guess</span>
		</div>
    </div>
	
    
    <script type="text/javascript">	
        var style = [{"featureType":"all","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#ffffff"}]},{"featureType":"all","elementType":"geometry.stroke","stylers":[{"visibility":"on"},{"color":"#84d9f4"}]},{"featureType":"all","elementType":"labels.text","stylers":[{"visibility":"simplified"},{"color":"#5f7997"}]},{"featureType":"administrative.country","elementType":"geometry.fill","stylers":[{"color":"#e13a3a"}]},{"featureType":"landscape.man_made","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#bfcce6"},{"saturation":"-76"}]},{"featureType":"landscape.man_made","elementType":"geometry.stroke","stylers":[{"visibility":"on"}]},{"featureType":"poi.business","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#7e94ba"}]}]
    
        var map = new google.maps.Map(document.getElementById('map'), {zoom: 14, styles: style, center: new google.maps.LatLng(-43.531,172.632), mapTypeId: google.maps.MapTypeId.ROADMAP});
        markers=[];
        google.maps.event.addListener(map,'click', function(event){
            for (var i=0; i < markers.length; i++){
                markers[i].setMap(null)
            }
            markers = [];
            var pos = event.latLng;
            var NewMarker = new google.maps.Marker({position: pos, map: map, Label: '!'});
            markers.push(NewMarker);
            document.getElementById('lat').value=pos.lat();
            document.getElementById('long').value=pos.lng();
            $("#guess").removeAttr("disabled"); 	
          

       });       
        
		/* Open the sidenav */
		function openNav() {
			document.getElementById("mySidenav").style.width = "100%";
		}

		/* Close/hide the sidenav */
		function closeNav() {
			document.getElementById("mySidenav").style.width = "0";
		}
	</script> 
    
{% endblock %}